<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—ë„ˆì§€ íš¨ìœ¨ ë¬¸ì œ</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h2 {
            color: #333;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 15px;
            text-align: center;
        }
        th {
            background-color: #f0f0f0;
            font-weight: bold;
        }
        .info-box {
            border: 2px solid #333;
            padding: 20px;
            margin: 30px 0;
            line-height: 2;
        }
        .info-box div {
            margin: 10px 0;
        }
        .choices {
            display: flex;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        .choice {
            padding: 15px 30px;
            border: 2px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            background-color: white;
        }
        .choice:hover {
            background-color: #f0f0f0;
            border-color: #999;
        }
        .choice.selected {
            background-color: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        .choice.correct {
            background-color: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        .choice.incorrect {
            background-color: #f44336;
            color: white;
            border-color: #f44336;
        }
        .button-group {
            margin-top: 30px;
            display: flex;
            gap: 10px;
        }
        button {
            padding: 12px 30px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .new-problem-btn {
            background-color: #2196F3;
            color: white;
        }
        .new-problem-btn:hover {
            background-color: #1976D2;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            font-weight: bold;
            display: none;
        }
        .result.correct {
            background-color: #d4edda;
            color: #155724;
            display: block;
        }
        .result.incorrect {
            background-color: #f8d7da;
            color: #721c24;
            display: block;
        }
        .explanation {
            margin-top: 15px;
            padding: 15px;
            background-color: #f9f9f9;
            border-left: 4px solid #2196F3;
            display: none;
        }
        .explanation.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2><strong>12.</strong> ë‹¤ìŒì€ ì „ê¸° ìë™ì°¨ A, Bì— ê³µê¸‰í•œ ì „ê¸° ì—ë„ˆì§€ì™€ ë°”í€´ë¥¼ ì›€ì§ì´ëŠ” ë° ì‚¬ìš©í•œ ì—ë„ˆì§€ë¥¼ ë‚˜íƒ€ë‚¸ ê²ƒì´ë‹¤. ì´ì— ëŒ€í•œ ì„¤ëª…ìœ¼ë¡œ ì˜³ì€ ê²ƒë§Œì„ [ë³´ê¸°]ì—ì„œ ìˆëŠ” ëŒ€ë¡œ ê³ ë¥¸ ê²ƒì€?</h2>
        
        <table>
            <thead>
                <tr>
                    <th>ìë™ì°¨</th>
                    <th>A</th>
                    <th>B</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ê³µê¸‰í•œ ì „ê¸° ì—ë„ˆì§€(J)</td>
                    <td id="energyA">600</td>
                    <td id="energyB">500</td>
                </tr>
                <tr>
                    <td>ë°”í€´ë¥¼ ì›€ì§ì´ëŠ” ë° ì‚¬ìš©í•œ ì—ë„ˆì§€(J)</td>
                    <td id="usedA">300</td>
                    <td id="usedB">400</td>
                </tr>
            </tbody>
        </table>

        <div style="text-align: center; margin: 20px 0;">
            <strong>&lt; ë³´ê¸° &gt;</strong>
        </div>

        <div class="info-box">
            <div id="statement1"></div>
            <div id="statement2"></div>
            <div id="statement3"></div>
        </div>

        <div class="choices" id="choicesContainer">
        </div>

        <div class="button-group">
            <button class="new-problem-btn" onclick="generateNewProblem()">ìƒˆ ë¬¸ì œ</button>
        </div>

        <div class="result" id="result"></div>
        <div class="explanation" id="explanation"></div>
    </div>

    <script>
        let currentAnswer = null;
        let selectedChoice = null;
        let currentProblemData = {};
        let answered = false;

        function generateNumbers() {
            const numbers = [];
            for (let i = 100; i <= 1000; i += 50) {
                numbers.push(i);
            }
            return numbers;
        }

        function getRandomNumber(numbers) {
            return numbers[Math.floor(Math.random() * numbers.length)];
        }

        function shuffle(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function sortChoiceKey(key) {
            const order = ['ã„±', 'ã„´', 'ã„·'];
            const parts = key.split(',');
            return parts.sort((a, b) => order.indexOf(a) - order.indexOf(b)).join(',');
        }

        function generateNewProblem() {
            const numbers = generateNumbers();
            
            let energyA, energyB, usedA, usedB;
            let attempts = 0;
            
            do {
                energyA = getRandomNumber(numbers);
                energyB = getRandomNumber(numbers);
                const availableForA = numbers.filter(n => n < energyA && n >= 50);
                const availableForB = numbers.filter(n => n < energyB && n >= 50);
                
                if (availableForA.length === 0 || availableForB.length === 0) {
                    continue;
                }
                
                usedA = getRandomNumber(availableForA);
                usedB = getRandomNumber(availableForB);
                attempts++;
            } while (attempts < 100 && (usedA === 0 || usedB === 0));

            document.getElementById('energyA').textContent = energyA;
            document.getElementById('energyB').textContent = energyB;
            document.getElementById('usedA').textContent = usedA;
            document.getElementById('usedB').textContent = usedB;

            const efficiencyA = usedA / energyA;
            const efficiencyB = usedB / energyB;

            const order1 = Math.random() > 0.5;
            const order2 = Math.random() > 0.5;
            const order3 = Math.random() > 0.5;

            const statement1Text = order1 
                ? `ã„±. ì—ë„ˆì§€ íš¨ìœ¨ì€ Bê°€ Aë³´ë‹¤ í¬ë‹¤.`
                : `ã„±. ì—ë„ˆì§€ íš¨ìœ¨ì€ Aê°€ Bë³´ë‹¤ í¬ë‹¤.`;
            
            const statement2Text = order2
                ? `ã„´. ê³µê¸‰í•œ ì „ê¸° ì—ë„ˆì§€ê°€ ê°™ì„ ë•Œ ë°œìƒí•˜ëŠ” ì—´ì—ë„ˆì§€ëŠ” Aê°€ Bë³´ë‹¤ ë§ë‹¤.`
                : `ã„´. ê³µê¸‰í•œ ì „ê¸° ì—ë„ˆì§€ê°€ ê°™ì„ ë•Œ ë°œìƒí•˜ëŠ” ì—´ì—ë„ˆì§€ëŠ” Bê°€ Aë³´ë‹¤ ë§ë‹¤.`;
            
            const statement3Text = order3
                ? `ã„·. ë°”í€´ë¥¼ ì›€ì§ì´ëŠ” ì—ë„ˆì§€ê°€ ê°™ì„ ë•Œ ê³µê¸‰í•´ì•¼ í•˜ëŠ” ì „ê¸° ì—ë„ˆì§€ì˜ ì–‘ì€ Aê°€ Bë³´ë‹¤ ë§ë‹¤.`
                : `ã„·. ë°”í€´ë¥¼ ì›€ì§ì´ëŠ” ì—ë„ˆì§€ê°€ ê°™ì„ ë•Œ ê³µê¸‰í•´ì•¼ í•˜ëŠ” ì „ê¸° ì—ë„ˆì§€ì˜ ì–‘ì€ Bê°€ Aë³´ë‹¤ ë§ë‹¤.`;

            document.getElementById('statement1').textContent = statement1Text;
            document.getElementById('statement2').textContent = statement2Text;
            document.getElementById('statement3').textContent = statement3Text;

            const statement1 = order1 
                ? (efficiencyB > efficiencyA) 
                : (efficiencyA > efficiencyB);
            
            const statement2 = order2 
                ? ((energyA - usedA) > (energyB - usedB)) 
                : ((energyB - usedB) > (energyA - usedA));
            
            const statement3 = order3 
                ? (efficiencyA < efficiencyB) 
                : (efficiencyB < efficiencyA);

            const correctStatements = [];
            if (statement1) correctStatements.push('ã„±');
            if (statement2) correctStatements.push('ã„´');
            if (statement3) correctStatements.push('ã„·');

            const correctKey = correctStatements.length > 0 ? correctStatements.join(',') : 'ã„±';
            
            const allChoices = [
                { key: 'ã„±', text: 'ã„±' },
                { key: 'ã„´', text: 'ã„´' },
                { key: 'ã„·', text: 'ã„·' },
                { key: 'ã„±,ã„´', text: 'ã„±, ã„´' },
                { key: 'ã„±,ã„·', text: 'ã„±, ã„·' },
                { key: 'ã„´,ã„·', text: 'ã„´, ã„·' },
                { key: 'ã„±,ã„´,ã„·', text: 'ã„±, ã„´, ã„·' }
            ];

            const correctChoice = allChoices.find(c => c.key === correctKey);
            const otherChoices = allChoices.filter(c => c.key !== correctKey);
            const shuffledOthers = shuffle(otherChoices);
            
            let selectedChoices = [correctChoice, ...shuffledOthers.slice(0, 4)];

            selectedChoices.sort((a, b) => {
                const aLen = a.key.split(',').length;
                const bLen = b.key.split(',').length;
                if (aLen !== bLen) return aLen - bLen;
                return a.key.localeCompare(b.key);
            });

            const choicesContainer = document.getElementById('choicesContainer');
            choicesContainer.innerHTML = '';
            
            selectedChoices.forEach((choice, index) => {
                const div = document.createElement('div');
                div.className = 'choice';
                div.dataset.answer = choice.key;
                div.textContent = `${['â‘ ', 'â‘¡', 'â‘¢', 'â‘£', 'â‘¤'][index]} ${choice.text}`;
                div.addEventListener('click', function() {
                    if (answered) return;
                    
                    document.querySelectorAll('.choice').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedChoice = this.dataset.answer;
                    checkAnswer();
                });
                choicesContainer.appendChild(div);
            });

            currentAnswer = correctKey;

            currentProblemData = {
                energyA, energyB, usedA, usedB,
                efficiencyA: efficiencyA.toFixed(3),
                efficiencyB: efficiencyB.toFixed(3),
                statement1, statement2, statement3,
                correctStatements,
                order1, order2, order3
            };

            document.getElementById('result').style.display = 'none';
            document.getElementById('explanation').classList.remove('show');
            selectedChoice = null;
            answered = false;
        }

        function checkAnswer() {
            if (!selectedChoice || answered) return;
            
            answered = true;

            const resultDiv = document.getElementById('result');
            const explanationDiv = document.getElementById('explanation');
            const choices = document.querySelectorAll('.choice');

            // ì •ë‹µ ì„ íƒì§€ëŠ” í•­ìƒ ì´ˆë¡ìƒ‰ìœ¼ë¡œ í‘œì‹œ
            choices.forEach(choice => {
                if (choice.dataset.answer === currentAnswer) {
                    choice.classList.add('correct');
                }
            });

            // ì˜¤ë‹µì„ ì„ íƒí•œ ê²½ìš°ì—ë§Œ ë¹¨ê°„ìƒ‰ í‘œì‹œ
            if (selectedChoice !== currentAnswer) {
                choices.forEach(choice => {
                    if (choice.dataset.answer === selectedChoice) {
                        choice.classList.add('incorrect');
                    }
                });
            }

            const { energyA, energyB, usedA, usedB, efficiencyA, efficiencyB, 
                    statement1, statement2, statement3, correctStatements } = currentProblemData;

            let explanationText = `<strong>í•´ì„¤:</strong><br><br>`;
            explanationText += `â€¢ Aì˜ íš¨ìœ¨: ${usedA}/${energyA} = ${efficiencyA} (${(efficiencyA*100).toFixed(1)}%)<br>`;
            explanationText += `â€¢ Bì˜ íš¨ìœ¨: ${usedB}/${energyB} = ${efficiencyB} (${(efficiencyB*100).toFixed(1)}%)<br>`;
            explanationText += `â€¢ Aì˜ ì—´ì†ì‹¤: ${energyA - usedA}J<br>`;
            explanationText += `â€¢ Bì˜ ì—´ì†ì‹¤: ${energyB - usedB}J<br><br>`;
            
            explanationText += `<strong>ê° ì§„ìˆ  ë¶„ì„:</strong><br>`;
            explanationText += `ã„±. ${statement1 ? 'ì°¸' : 'ê±°ì§“'}<br>`;
            explanationText += `ã„´. ${statement2 ? 'ì°¸' : 'ê±°ì§“'}<br>`;
            explanationText += `ã„·. ${statement3 ? 'ì°¸' : 'ê±°ì§“'}<br><br>`;
            
            explanationText += `<strong>ë”°ë¼ì„œ ì˜³ì€ ê²ƒì€: ${correctStatements.join(', ')}</strong>`;

            explanationDiv.innerHTML = explanationText;
            explanationDiv.classList.add('show');

            if (selectedChoice === currentAnswer) {
                resultDiv.textContent = 'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰';
                resultDiv.className = 'result correct';
            } else {
                resultDiv.textContent = `ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µì€ ${correctStatements.join(', ')}ì…ë‹ˆë‹¤.`;
                resultDiv.className = 'result incorrect';
            }
        }

        generateNewProblem();
    </script>
</body>
</html>