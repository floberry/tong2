<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—ë„ˆì§€íš¨ìœ¨ ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }
        
        .container {
            max-width: 500px;
            width: 100%;
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin: 20px 0;
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 24px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-bottom: 20px;
        }
        
        .problem-box {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .problem-number {
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .problem-text {
            line-height: 1.6;
            margin-bottom: 15px;
            color: #333;
        }
        
        .device-grid {
            display: grid;
            gap: 15px;
            margin: 15px 0;
        }
        
        .device-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .device-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .device-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-right: 12px;
        }
        
        .device-icon.A { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .device-icon.B { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .device-icon.C { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        
        .device-info {
            flex: 1;
        }
        
        .device-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 3px;
        }
        
        .device-desc {
            font-size: 12px;
            color: #666;
        }
        
        .energy-flow {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin: 12px 0;
        }
        
        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .flow-box {
            flex: 1;
            text-align: center;
        }
        
        .flow-label {
            font-size: 11px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .flow-value {
            background: white;
            padding: 8px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 15px;
            color: #333;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .flow-arrow {
            font-size: 24px;
            color: #999;
            margin: 0 5px;
        }
        
        .device-box {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            border: 2px solid #333;
            border-radius: 10px;
            padding: 15px 10px;
            color: white;
            font-weight: bold;
            font-size: 14px;
            text-align: center;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
            min-width: 80px;
        }
        
        .loss-display {
            text-align: center;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px dashed #ddd;
        }
        
        .loss-label {
            font-size: 11px;
            color: #666;
        }
        
        .loss-value {
            font-size: 13px;
            font-weight: bold;
            color: #e74c3c;
        }
        
        .formula-box {
            background: #fff3cd;
            border: 2px dashed #ffc107;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .formula {
            font-size: 13px;
            font-weight: bold;
            color: #856404;
        }
        
        .input-group {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .input-group label {
            font-weight: bold;
            color: #333;
            font-size: 14px;
        }
        
        .input-group input {
            width: 80px;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 15px;
            text-align: center;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .check-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            margin-left: 5px;
        }
        
        .check-icon.correct {
            background: #d4edda;
            color: #155724;
        }
        
        .check-icon.incorrect {
            background: #f8d7da;
            color: #721c24;
        }
        
        .question-section {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .question-text {
            font-weight: bold;
            margin-bottom: 10px;
            color: #1565c0;
        }
        

        
        .options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        
        .option-btn {
            padding: 15px 10px;
            border: 3px solid #ddd;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .option-btn:hover {
            background: #f0f0f0;
        }
        
        .option-btn.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .option-btn.A { border-color: #667eea; }
        .option-btn.B { border-color: #f5576c; }
        .option-btn.C { border-color: #00f2fe; }
        
        .comparison-display {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
            padding: 15px;
            background: white;
            border-radius: 10px;
            margin: 15px 0;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        
        button {
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .new-problem-btn {
            background: #667eea;
            color: white;
            grid-column: 1 / -1;
        }
        
        .new-problem-btn:hover {
            background: #5568d3;
        }
        
        .submit-btn {
            background: #4CAF50;
            color: white;
        }
        
        .submit-btn:hover {
            background: #45a049;
        }
        
        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .check-all-btn {
            background: #2196F3;
            color: white;
            grid-column: 1 / -1;
        }
        
        .check-all-btn:hover {
            background: #1976D2;
        }
        
        .reset-btn {
            background: #ff9800;
            color: white;
        }
        
        .reset-btn:hover {
            background: #e68900;
        }
        
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            display: none;
        }
        
        .result.correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .result.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        
        .divider {
            height: 2px;
            background: linear-gradient(to right, transparent, #ddd, transparent);
            margin: 30px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>âš¡ ì—ë„ˆì§€íš¨ìœ¨ ì‹œë®¬ë ˆì´ì…˜</h1>
        <div class="subtitle">í†µí•©ê³¼í•™ - ì—ë„ˆì§€ ì „í™˜ê³¼ íš¨ìœ¨</div>
        
        <!-- ë¬¸ì œ 1: ì—ë„ˆì§€ íš¨ìœ¨ ê³„ì‚° -->
        <div class="problem-box">
            <div class="problem-number">ë¬¸ì œ 1. ì—ë„ˆì§€ íš¨ìœ¨ ê³„ì‚°</div>
            <div class="problem-text">
                ë‹¤ìŒì€ ì„¸ ê°€ì§€ ì¥ì¹˜ì˜ ì—ë„ˆì§€ ë³€í™˜ ê³¼ì •ì´ë‹¤. ê° ì¥ì¹˜ì˜ ì—ë„ˆì§€ íš¨ìœ¨ì„ ê³„ì‚°í•˜ì‹œì˜¤.
            </div>
            
            <div class="device-grid" id="deviceGrid"></div>
            
            <button class="check-all-btn" onclick="checkAllEfficiencies()">âœ“ ì „ì²´ ì •ë‹µ í™•ì¸</button>
        </div>
        
        <div class="divider"></div>
        
        <!-- ë¬¸ì œ 2: íš¨ìœ¨ ë¹„êµ -->
        <div class="problem-box">
            <div class="problem-number">ë¬¸ì œ 2. ì—ë„ˆì§€ íš¨ìœ¨ ë¹„êµ</div>
            <div class="problem-text">
                ìœ„ì—ì„œ ê³„ì‚°í•œ ì„¸ ì¥ì¹˜ì˜ ì—ë„ˆì§€ íš¨ìœ¨ì„ í¬ê¸°ìˆœìœ¼ë¡œ ë¹„êµí•˜ì‹œì˜¤.
            </div>
            
            <div class="question-section">
                <div class="question-text">
                    ì„¸ ì¥ì¹˜ì˜ ì—ë„ˆì§€ íš¨ìœ¨ì„ í¬ê¸°ìˆœìœ¼ë¡œ ë‚˜ì—´í•˜ì‹œì˜¤.
                </div>
                
                <div style="font-size: 13px; color: #1565c0; margin-bottom: 10px;">
                    ë²„íŠ¼ì„ í´ë¦­í•œ ìˆœì„œëŒ€ë¡œ í¬ê¸° ë¹„êµê°€ ì…ë ¥ë©ë‹ˆë‹¤.
                </div>
                
                <div class="options" id="options"></div>
                
                <div class="comparison-display" id="comparisonDisplay">
                    ì„ íƒí•´ì£¼ì„¸ìš”
                </div>
                
                <div class="buttons">
                    <button class="submit-btn" id="submitBtn2" onclick="checkComparison()" disabled>âœ“ ì •ë‹µ í™•ì¸</button>
                    <button class="reset-btn" onclick="resetSelection()">â†º ì„ íƒ ì´ˆê¸°í™”</button>
                </div>
                
                <div class="result" id="result2"></div>
            </div>
        </div>
        
        <button class="new-problem-btn" onclick="generateNewProblem()">ğŸ”„ ìƒˆ ë¬¸ì œ</button>
    </div>

    <script>
        let selectedOptions = [];
        let devices = {};
        
        const deviceTypes = [
            { 
                id: 'A', 
                name: 'í™”ë ¥ ë°œì „ê¸°', 
                icon: 'âš¡',
                desc: 'ì—´ì—ë„ˆì§€ â†’ ì „ê¸°ì—ë„ˆì§€',
                inputLabel: 'íˆ¬ì… ì—´',
                outputLabel: 'ì „ê¸° ìƒì‚°',
                deviceLabel: 'ë°œì „ê¸°'
            },
            { 
                id: 'B', 
                name: 'ì „ê¸° ë‚œë°©ê¸°', 
                icon: 'ğŸ”¥',
                desc: 'ì „ê¸°ì—ë„ˆì§€ â†’ ì—´ì—ë„ˆì§€',
                inputLabel: 'ì „ê¸° ì†Œë¹„',
                outputLabel: 'ì—´ ë°©ì¶œ',
                deviceLabel: 'ë‚œë°©ê¸°'
            },
            { 
                id: 'C', 
                name: 'ìë™ì°¨ ì—”ì§„', 
                icon: 'ğŸš—',
                desc: 'í™”í•™ì—ë„ˆì§€ â†’ ìš´ë™ì—ë„ˆì§€',
                inputLabel: 'ì—°ë£Œ íˆ¬ì…',
                outputLabel: 'ìš´ë™ ìƒì‚°',
                deviceLabel: 'ì—”ì§„'
            }
        ];
        
        function generateNewProblem() {
            devices = {};
            
            deviceTypes.forEach(type => {
                // íˆ¬ì… ì—ë„ˆì§€ (1000~5000J, 100 ë‹¨ìœ„)
                const input = (Math.floor(Math.random() * 41) + 10) * 100;
                
                // íš¨ìœ¨ (15~85%, 5% ë‹¨ìœ„) - ë‹¤ì–‘í•œ ë²”ìœ„ë¡œ ì„¤ì •
                let efficiency;
                if (type.id === 'A') {
                    efficiency = (Math.floor(Math.random() * 9) + 6) * 5; // 30-70%
                } else if (type.id === 'B') {
                    efficiency = (Math.floor(Math.random() * 6) + 13) * 5; // 65-90%
                } else {
                    efficiency = (Math.floor(Math.random() * 7) + 3) * 5; // 15-45%
                }
                
                // ì¶œë ¥ ì—ë„ˆì§€ ê³„ì‚°
                const output = Math.round(input * efficiency / 100);
                
                // ì†ì‹¤ ì—ë„ˆì§€
                const loss = input - output;
                
                devices[type.id] = {
                    ...type,
                    input,
                    output,
                    loss,
                    efficiency,
                    userAnswer: null,
                    isCorrect: null
                };
            });
            
            renderDevices();
            resetSelection();
        }
        
        function renderDevices() {
            const grid = document.getElementById('deviceGrid');
            
            // ê¸°ì¡´ ì…ë ¥ê°’ ì €ì¥
            const savedValues = {};
            deviceTypes.forEach(type => {
                const existingInput = document.getElementById('input' + type.id);
                if (existingInput) {
                    savedValues[type.id] = existingInput.value;
                }
            });
            
            grid.innerHTML = '';
            
            deviceTypes.forEach(type => {
                const device = devices[type.id];
                
                const card = document.createElement('div');
                card.className = 'device-card';
                card.innerHTML = `
                    <div class="device-header">
                        <div class="device-icon ${type.id}">${type.icon}</div>
                        <div class="device-info">
                            <div class="device-name">ì¥ì¹˜ ${type.id}: ${type.name}</div>
                            <div class="device-desc">${type.desc}</div>
                        </div>
                    </div>
                    
                    <div class="energy-flow">
                        <div class="flow-diagram">
                            <div class="flow-box">
                                <div class="flow-label">${type.inputLabel}</div>
                                <div class="flow-value">${device.input}J</div>
                            </div>
                            <div class="flow-arrow">â†’</div>
                            <div class="device-box">${type.deviceLabel}</div>
                            <div class="flow-arrow">â†’</div>
                            <div class="flow-box">
                                <div class="flow-label">${type.outputLabel}</div>
                                <div class="flow-value">${device.output}J</div>
                            </div>
                        </div>
                        <div class="loss-display">
                            <span class="loss-label">ì†ì‹¤ ì—ë„ˆì§€: </span>
                            <span class="loss-value">${device.loss}J â†“</span>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>íš¨ìœ¨:</label>
                        <input type="number" id="input${type.id}" placeholder="?" min="0" max="100" value="${savedValues[type.id] || device.userAnswer || ''}">
                        <span>%</span>
                        <div class="check-icon" id="check${type.id}" style="display:${device.isCorrect !== null ? 'flex' : 'none'};" class="${device.isCorrect ? 'check-icon correct' : 'check-icon incorrect'}">${device.isCorrect ? 'âœ“' : 'âœ—'}</div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
            
            updateOptions();
        }
        
        function checkAllEfficiencies() {
            deviceTypes.forEach(type => {
                const input = document.getElementById('input' + type.id);
                const checkIcon = document.getElementById('check' + type.id);
                const userAnswer = parseFloat(input.value);
                const device = devices[type.id];
                
                if (isNaN(userAnswer)) {
                    checkIcon.style.display = 'none';
                    device.userAnswer = null;
                    device.isCorrect = null;
                    return;
                }
                
                const isCorrect = Math.abs(userAnswer - device.efficiency) <= 0.5;
                device.userAnswer = userAnswer;
                device.isCorrect = isCorrect;
                
                checkIcon.style.display = 'flex';
                if (isCorrect) {
                    checkIcon.className = 'check-icon correct';
                    checkIcon.textContent = 'âœ“';
                } else {
                    checkIcon.className = 'check-icon incorrect';
                    checkIcon.textContent = 'âœ—';
                }
            });
        }
        
        function updateOptions() {
            const options = document.getElementById('options');
            options.innerHTML = '';
            
            deviceTypes.forEach(type => {
                const btn = document.createElement('button');
                btn.className = `option-btn ${type.id}`;
                btn.innerHTML = `ì¥ì¹˜ ${type.id}<br><small style="font-size: 13px;">${type.name}</small>`;
                btn.onclick = () => selectOption(type.id, btn);
                options.appendChild(btn);
            });
        }
        
        function selectOption(option, btnElement) {
            if (selectedOptions.includes(option)) return;
            
            selectedOptions.push(option);
            btnElement.classList.add('selected');
            
            updateSelectionDisplay();
            
            if (selectedOptions.length === 3) {
                document.getElementById('submitBtn2').disabled = false;
            }
        }
        
        function updateSelectionDisplay() {
            const display = document.getElementById('comparisonDisplay');
            if (selectedOptions.length === 0) {
                display.textContent = 'ì„ íƒí•´ì£¼ì„¸ìš”';
            } else {
                display.textContent = selectedOptions.join(' > ');
            }
        }
        
        function resetSelection() {
            selectedOptions = [];
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            updateSelectionDisplay();
            document.getElementById('submitBtn2').disabled = true;
            document.getElementById('result2').style.display = 'none';
        }
        
        function checkComparison() {
            const result = document.getElementById('result2');
            
            // ì‹¤ì œ íš¨ìœ¨ê°’ìœ¼ë¡œ ì •ë‹µ í™•ì¸
            const values = selectedOptions.map(id => devices[id].efficiency);
            
            const isCorrect = values[0] > values[1] && values[1] > values[2];
            
            if (isCorrect) {
                result.className = 'result correct';
                result.innerHTML = `
                    âœ“ ì •ë‹µì…ë‹ˆë‹¤!<br>
                    <small style="font-size: 14px;">
                        ${selectedOptions.map((id, idx) => 
                            `ì¥ì¹˜ ${id}: ${values[idx]}%`
                        ).join(' > ')}
                    </small>
                `;
            } else {
                result.className = 'result incorrect';
                
                // ì •ë‹µ ê³„ì‚°
                const sorted = [...deviceTypes].sort((a, b) => 
                    devices[b.id].efficiency - devices[a.id].efficiency
                );
                
                // í•´ì„¤ ìƒì„±
                let explanation = `ì •ë‹µ: ${sorted.map(t => 
                    `ì¥ì¹˜ ${t.id}(${devices[t.id].efficiency}%)`
                ).join(' > ')}<br><br>`;
                
                explanation += '<div style="text-align: left; font-size: 13px; line-height: 1.6;">';
                explanation += '<strong>ã€í•´ì„¤ã€‘</strong><br>';
                
                sorted.forEach((type, index) => {
                    const device = devices[type.id];
                    explanation += `${index + 1}. ì¥ì¹˜ ${type.id} (${type.name})<br>`;
                    explanation += `&nbsp;&nbsp;&nbsp;íš¨ìœ¨ = (ì¶œë ¥/íˆ¬ì…) Ã— 100<br>`;
                    explanation += `&nbsp;&nbsp;&nbsp;íš¨ìœ¨ = (${device.output}J / ${device.input}J) Ã— 100<br>`;
                    explanation += `&nbsp;&nbsp;&nbsp;íš¨ìœ¨ = ${device.efficiency}%<br><br>`;
                });
                
                explanation += 'ì—ë„ˆì§€ íš¨ìœ¨ì´ ë†’ì„ìˆ˜ë¡ íˆ¬ì… ì—ë„ˆì§€ë¥¼ ìœ ìš©í•œ ì—ë„ˆì§€ë¡œ ë” ë§ì´ ì „í™˜í•œ ê²ƒì…ë‹ˆë‹¤.';
                explanation += '</div>';
                
                result.innerHTML = `
                    âœ— í‹€ë ¸ìŠµë‹ˆë‹¤.<br>
                    <small>${explanation}</small>
                `;
            }
            
            result.style.display = 'block';
        }
        
        // ì´ˆê¸° ë¬¸ì œ ìƒì„±
        generateNewProblem();
    </script>
</body>
</html>